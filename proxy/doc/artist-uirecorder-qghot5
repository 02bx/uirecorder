{"id":1484777,"slug":"qghot5","title":"回归测试","book_id":187563,"book":{"id":187563,"type":"Book","slug":"uirecorder","name":"UIRecorder","user_id":296279,"description":"一端录制，多端使用的便捷 UI 自动化测试工具","creator_id":94302,"public":1,"items_count":22,"likes_count":0,"watches_count":12,"content_updated_at":"2019-10-11T06:31:45.205Z","updated_at":"2019-10-11T06:31:45.000Z","created_at":"2018-12-11T06:11:00.000Z","namespace":"artist/uirecorder","user":{"id":296279,"type":"Group","login":"artist","name":"F&D艺术家-前端自动化测试","description":"探索与推广前端自动化测试","avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":4,"public_books_count":4,"followers_count":0,"following_count":0,"created_at":"2019-03-21T06:44:55.000Z","updated_at":"2019-08-08T02:30:37.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":94302,"creator":{"id":94302,"type":"User","login":"linshuoting","name":"说听(Stngle)","description":"F&D艺术家   \nhttps://github.com/Stngle","avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":2,"public_books_count":1,"followers_count":8,"following_count":6,"created_at":"2018-03-21T12:59:06.000Z","updated_at":"2019-10-09T08:37:02.000Z","_serializer":"v2.user"},"format":"lake","body":"","body_draft":"","body_html":"<!doctype html><div class=\"lake-content-editor-core lake-engine\" data-lake-element=\"root\" data-selection-94302=\"%7B%22path%22%3A%5B%5B59%2C0%2C0%2C13%5D%2C%5B59%2C0%2C0%2C13%5D%5D%2C%22uuid%22%3A%2294302%22%2C%22active%22%3Atrue%7D\"><h4 id=\"5f836bea\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">1、Error: connect ECONNREFUSED 127.0.0.1:4444</h4><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>本地回归测试的时候，需要启动 selenium-standalone 提供 WebDriver 服务，UIRecorder 生成的工程目录下默认会有集成，如果没有安装成功可以运行以下命令安装：</li></ul><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"CceOF\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(38, 38, 38); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-builtin\" style=\"color: rgb(111, 66, 193); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">npm</span> install\n<span class=\"cm-builtin\" style=\"color: rgb(111, 66, 193); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">npm</span> run installdriver</pre></div></div></div><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>然后另开窗口，在项目目录下运行&nbsp;<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">npm run server</code>。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"88786d78\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">2、清除 cookie 或 localstorage？</h4><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>使用无痕模式打开浏览器进行回归测试，<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">chromeOptions</code>&nbsp;新增配置&nbsp;<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">--incognito</code>&nbsp;。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"982da9c5\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">3、跑测试用例上传图片失败？</h4><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>上传文件需要放在工程目录下&nbsp;<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">uploadfiles/</code>&nbsp;文件夹下，且文件名需要跟录制时一致。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"b05333d6\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">4、只回归部分脚本？</h4><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>支持正则匹配，如&nbsp;<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">source run.sh 'sample/*'</code>&nbsp;，只执行&nbsp;<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">sample</code>&nbsp; 文件夹下所有测试用例。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"e4afe4a4\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">5、断言 .val() 与 .text() 区别？</h4><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>.val() 一般是表单控件才有的值，如&nbsp;<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">&lt;input value=\"测试值\"&gt;</code>&nbsp;；</li><li>text() 一般是标签内的文本，如&nbsp;<code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">&lt;p&gt;测试文本&lt;/p&gt;</code>。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"6299ed8e\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\"><span style=\"color: #191F25;\">6、is not clickable at point</span></h4><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span style=\"color: #191F25;\"><br></span></p><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li><span style=\"color: #191F25;\">很大可能是点击的元素被某个悬浮层遮住了</span></li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"eRycp\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">7、自定义报告生成目录</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>参考链接 <a href=\"https://www.npmjs.com/package/mochawesome#mocha-reporter-options\" target=\"_blank\">https://www.npmjs.com/package/mochawesome#mocha-reporter-options</a>&nbsp;，可输入命令行参数如下：</li></ul><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"vTIIw\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(38, 38, 38); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">--reporter-options reportDir=customReportDir,reportFilename=customReportFilename</pre></div></div></div><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"MaiO3\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">8、自定义报告格式</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>默认生成报告目录下 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">/reports</code>&nbsp;会有 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">index.json</code>&nbsp;文件，为运行结果数据模型，可根据该数据模型自定义报告渲染及进行数据上报等。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"H9S6U\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">9、IE保护模式</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li><span>如果出现ie 因为保护模式出现的一些问题 ，可以将 ie 的 internet选项的设置--安全--各区域都采用保护模式，只能解决保护模式的一些问题</span></li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"Hl9bb\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">10、Wait Element display timeout</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>一般是以下三个方面的问题：</li></ul><ul lake-indent=\"1\" style=\"list-style-type: none; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><ul lake-indent=\"0\" style=\"list-style-type: circle; margin: 0px; padding-left: 23px;\"><li>选择器是否是动态的，比如带有随机数。解决方法：选择器过滤掉随机数 或 随机数按一定规则生成。</li><li>页面的数据是否变化了，比如录制的时候操作列表第9条数据，回归测试的时候，第9条数据已经不存在。解决方法：确保固定输入固定输出。</li><li>页面内容是否太大，导致渲染时间过长。解决方法：添加延迟，driver.sleep()。</li></ul></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"MvxFd\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">11、TypeError: Cannot read property 'toString' of null</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>imgdiff 功能需要安装 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">GraphicsMagick</code>&nbsp;：</li></ul><ul lake-indent=\"1\" style=\"list-style-type: none; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><ul lake-indent=\"0\" style=\"list-style-type: circle; margin: 0px; padding-left: 23px;\"><li><span class=\"lake-fontsize-12\" style=\"color: rgb(36, 41, 46); font-size: 16px; line-height: 24px;\" data-mce-style=\"font-size: 12px\">brew install graphicsmagick (Mac)</span></li><li><span class=\"lake-fontsize-12\" style=\"color: rgb(36, 41, 46); font-size: 16px; line-height: 24px;\" data-mce-style=\"font-size: 12px\">sudo apt-get install graphicsmagick (Linux)</span></li><li><span class=\"lake-fontsize-12\" style=\"color: rgb(36, 41, 46); font-size: 16px; line-height: 24px;\" data-mce-style=\"font-size: 12px\">http://www.graphicsmagick.org/download.html (Windows)&nbsp;&nbsp;</span></li></ul></ul><p style=\"padding-left: 2em; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"cBWzv\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">12、测试用例执行不通过，NPM ERROR</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>3.1.5 版本已经修复，历史版本需要修改 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">package.json</code>&nbsp;文件在 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">reporter-options</code>&nbsp;增加 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">processAlwaysExitWithZero=true</code>&nbsp;配置：</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span data-card-type=\"inline\" data-lake-card=\"image\"><img data-role=\"image\" src=\"https://cdn.nlark.com/yuque/0/2019/png/94302/1566987276835-116390ea-4d2c-4099-a5e9-a5d753666647.png?x-oss-process=image/resize,w_2043\" data-raw-src=\"https://cdn.nlark.com/yuque/0/2019/png/94302/1566987276835-116390ea-4d2c-4099-a5e9-a5d753666647.png\" class=\"image lake-drag-image\" alt=\"image.png\" title=\"image.png\" style=\"visibility: visible; width: 746px; height: 277px;\"></span></p><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>已有工程需要更新 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">node_modules</code>&nbsp;依赖包：</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"s7Y89\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(38, 38, 38); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-builtin\" style=\"color: rgb(111, 66, 193); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">rm</span> <span class=\"cm-attribute\" style=\"color: rgb(111, 66, 193); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">-rf</span> node_modules\n<span class=\"cm-builtin\" style=\"color: rgb(111, 66, 193); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">npm</span> i\n<span class=\"cm-builtin\" style=\"color: rgb(111, 66, 193); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">npm</span> run installdriver</pre></div></div></div><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>v3.1.5 以上版本 UIRecorder init 生成的 project，不需要做修改。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"8o656\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">13、测试用例某个步骤执行 fail，希望继续执行后续步骤</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>默认 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">package.json</code>&nbsp;文件执行 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">script</code>&nbsp;均带有 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">--bail</code>&nbsp;配置项，将其去掉即可。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"Fi0VT\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">14、API fatal error handler returned after process out of memory</h4><ul lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>回归测试文件上传时，上传文件过大，导致内存溢出，改用较小的文件。</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h4 id=\"CSQx0\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 16px; line-height: 24px;\">15. 测试多套环境（日常、预发、线上）解决方案</h4><ul start=\"-\" lake-indent=\"0\" style=\"list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li>初始化生成的工程目录下，有 <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">hosts</code>&nbsp;文件，在文件内配置对应 hosts 即可，示例如下：</li></ul><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span data-card-type=\"inline\" data-lake-card=\"image\"><img data-role=\"image\" src=\"https://cdn.nlark.com/yuque/0/2019/png/94302/1570502719854-2f2cfe26-228c-4524-8b16-4063022feafa.png?x-oss-process=image/resize,w_2043\" data-raw-src=\"https://cdn.nlark.com/yuque/0/2019/png/94302/1570502719854-2f2cfe26-228c-4524-8b16-4063022feafa.png\" class=\"image lake-drag-image\" alt=\"image.png\" title=\"image.png\" style=\"visibility: visible; width: 746px; height: 411px;\"></span></p></div>","body_lake":"<!doctype lake><meta name=\"doc-version\" content=\"1\" /><h4 id=\"5f836bea\">1、Error: connect ECONNREFUSED 127.0.0.1:4444</h4><p><br /></p><ul><li>本地回归测试的时候，需要启动 selenium-standalone 提供 WebDriver 服务，UIRecorder 生成的工程目录下默认会有集成，如果没有安装成功可以运行以下命令安装：</li></ul><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22npm%20install%5Cnnpm%20run%20installdriver%22%2C%22id%22%3A%22CceOF%22%7D\"></card><ul><li>然后另开窗口，在项目目录下运行 <code>npm run server</code>。</li></ul><p><br /></p><h4 id=\"88786d78\">2、清除 cookie 或 localstorage？</h4><p><br /></p><ul><li>使用无痕模式打开浏览器进行回归测试，<code>chromeOptions</code> 新增配置 <code>--incognito</code> 。</li></ul><p><br /></p><h4 id=\"982da9c5\">3、跑测试用例上传图片失败？</h4><p><br /></p><ul><li>上传文件需要放在工程目录下 <code>uploadfiles/</code> 文件夹下，且文件名需要跟录制时一致。</li></ul><p><br /></p><h4 id=\"b05333d6\">4、只回归部分脚本？</h4><p><br /></p><ul><li>支持正则匹配，如 <code>source run.sh 'sample/*'</code> ，只执行 <code>sample</code>  文件夹下所有测试用例。</li></ul><p><br /></p><h4 id=\"e4afe4a4\">5、断言 .val() 与 .text() 区别？</h4><p><br /></p><ul><li>.val() 一般是表单控件才有的值，如 <code>&lt;input value=&quot;测试值&quot;&gt;</code> ；</li><li>text() 一般是标签内的文本，如 <code>&lt;p&gt;测试文本&lt;/p&gt;</code>。</li></ul><p><br /></p><h4 id=\"6299ed8e\"><span style=\"color: #191F25;\">6、is not clickable at point</span></h4><p><span style=\"color: #191F25;\"><br /></span></p><ul><li><span style=\"color: #191F25;\">很大可能是点击的元素被某个悬浮层遮住了</span></li></ul><p><br /></p><h4 id=\"eRycp\">7、自定义报告生成目录</h4><ul><li>参考链接 <a href=\"https://www.npmjs.com/package/mochawesome#mocha-reporter-options\" target=\"_blank\">https://www.npmjs.com/package/mochawesome#mocha-reporter-options</a> ，可输入命令行参数如下：</li></ul><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22--reporter-options%20reportDir%3DcustomReportDir%2CreportFilename%3DcustomReportFilename%22%2C%22id%22%3A%22vTIIw%22%7D\"></card><p><br /></p><h4 id=\"MaiO3\">8、自定义报告格式</h4><ul><li>默认生成报告目录下 <code>/reports</code> 会有 <code>index.json</code> 文件，为运行结果数据模型，可根据该数据模型自定义报告渲染及进行数据上报等。</li></ul><p><br /></p><h4 id=\"H9S6U\">9、IE保护模式</h4><ul><li><span>如果出现ie 因为保护模式出现的一些问题 ，可以将 ie 的 internet选项的设置--安全--各区域都采用保护模式，只能解决保护模式的一些问题</span></li></ul><p><br /></p><h4 id=\"Hl9bb\">10、Wait Element display timeout</h4><ul><li>一般是以下三个方面的问题：</li></ul><ul data-lake-indent=\"1\"><li>选择器是否是动态的，比如带有随机数。解决方法：选择器过滤掉随机数 或 随机数按一定规则生成。</li><li>页面的数据是否变化了，比如录制的时候操作列表第9条数据，回归测试的时候，第9条数据已经不存在。解决方法：确保固定输入固定输出。</li><li>页面内容是否太大，导致渲染时间过长。解决方法：添加延迟，driver.sleep()。</li></ul><p><br /></p><h4 id=\"MvxFd\">11、TypeError: Cannot read property 'toString' of null</h4><ul><li>imgdiff 功能需要安装 <code>GraphicsMagick</code> ：</li></ul><ul data-lake-indent=\"1\"><li><span class=\"lake-fontsize-12\" style=\"color: #24292E;\">brew install graphicsmagick (Mac)</span></li><li><span class=\"lake-fontsize-12\" style=\"color: #24292E;\">sudo apt-get install graphicsmagick (Linux)</span></li><li><span class=\"lake-fontsize-12\" style=\"color: #24292E;\">http://www.graphicsmagick.org/download.html (Windows)  </span></li></ul><p style=\"padding-left: 2em;\"><br /></p><h4 id=\"cBWzv\">12、测试用例执行不通过，NPM ERROR</h4><ul><li>3.1.5 版本已经修复，历史版本需要修改 <code>package.json</code> 文件在 <code>reporter-options</code> 增加 <code>processAlwaysExitWithZero=true</code> 配置：</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F94302%2F1566987276835-116390ea-4d2c-4099-a5e9-a5d753666647.png%22%2C%22originWidth%22%3A2870%2C%22originHeight%22%3A1066%2C%22name%22%3A%22image.png%22%2C%22size%22%3A2308722%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A1435%2C%22height%22%3A533%7D\"></card></p><ul><li>已有工程需要更新 <code>node_modules</code> 依赖包：</li></ul><p><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22rm%20-rf%20node_modules%5Cnnpm%20i%5Cnnpm%20run%20installdriver%22%2C%22id%22%3A%22s7Y89%22%7D\"></card><ul><li>v3.1.5 以上版本 UIRecorder init 生成的 project，不需要做修改。</li></ul><p><br /></p><h4 id=\"8o656\">13、测试用例某个步骤执行 fail，希望继续执行后续步骤</h4><ul><li>默认 <code>package.json</code> 文件执行 <code>script</code> 均带有 <code>--bail</code> 配置项，将其去掉即可。</li></ul><p><br /></p><h4 id=\"Fi0VT\">14、API fatal error handler returned after process out of memory</h4><ul><li>回归测试文件上传时，上传文件过大，导致内存溢出，改用较小的文件。</li></ul><p><br /></p><h4 id=\"CSQx0\">15. 测试多套环境（日常、预发、线上）解决方案</h4><ul><li>初始化生成的工程目录下，有 <code>hosts</code> 文件，在文件内配置对应 hosts 即可，示例如下：</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F94302%2F1570502719854-2f2cfe26-228c-4524-8b16-4063022feafa.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1588%2C%22name%22%3A%22image.png%22%2C%22size%22%3A608553%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A960%2C%22height%22%3A529%7D\"></card></p>","public":1,"status":null,"likes_count":7,"comments_count":2,"content_updated_at":"2019-10-08T02:45:41.000Z","deleted_at":null,"created_at":"2019-04-08T06:33:27.000Z","updated_at":"2019-10-08T02:45:41.000Z","published_at":"2019-10-08T02:45:41.000Z","first_published_at":"2019-04-08T06:33:54.000Z","word_count":827,"cover":null,"description":"1、Error: connect ECONNREFUSED 127.0.0.1:4444本地回归测试的时候，需要启动 selenium-standalone 提供 WebDriver 服务，UIRecorder 生成的工程目录下默认会有集成，如果没有安装成功可以运行以下命令安装：npm ins...","custom_description":null,"_serializer":"v2.doc_detail"}