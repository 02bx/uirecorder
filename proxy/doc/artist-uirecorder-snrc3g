{"id":1484771,"slug":"snrc3g","title":"录制功能","book_id":187563,"book":{"id":187563,"type":"Book","slug":"uirecorder","name":"UIRecorder","user_id":296279,"description":"一端录制，多端使用的便捷 UI 自动化测试工具","creator_id":94302,"public":1,"items_count":12,"likes_count":0,"watches_count":8,"content_updated_at":"2019-06-23T14:04:31.890Z","updated_at":"2019-06-23T14:04:31.000Z","created_at":"2018-12-11T06:11:00.000Z","namespace":"artist/uirecorder","user":{"id":296279,"type":"Group","login":"artist","name":"F&D艺术家-前端自动化测试","description":"探索与推广前端自动化测试","avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150693943-avatar/c80e9798-27e4-4238-8760-4bb5828a7228.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":3,"public_books_count":3,"followers_count":0,"following_count":0,"created_at":"2019-03-21T06:44:55.000Z","updated_at":"2019-05-08T06:23:34.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":94302,"creator":{"id":94302,"type":"User","login":"linshuoting","name":"说听(Stngle)","description":"F&D艺术家   \nhttps://github.com/Stngle","avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":1,"public_books_count":0,"followers_count":6,"following_count":3,"created_at":"2018-03-21T12:59:06.000Z","updated_at":"2019-06-24T01:54:44.000Z","_serializer":"v2.user"},"format":"lake","body":"","body_draft":"","body_html":"<h4 id=\"be02a4b1\"><span style=\"color: #191F25;\">一、录制脚本时提示“excute error”原因及解决方法？</span></h4><p><span style=\"color: #191F25;\"><br /></span></p><ul><li><span style=\"color: #191F25;\">录制过程默认会开启同步校验浏览器，录制同时会进行回归校验，如果提示“执行失败”，则说明该步骤在回归测试过程有很大几率会执行失败，例如：</span></li></ul><ul data-lake-indent=\"1\"><li><span style=\"color: #191F25;\">提示 </span><code><span style=\"color: #191F25;\">Wait element diaplayed timeout</span></code>，则该步骤回归测试运行时也可能出现加载延迟，导致原因可能是页面较大或 iframe 内节点加载时间较长 或 异步请求数据时间较长，解决方法可以在该步骤前增加延迟时间。</li></ul><p><br /></p><h4 id=\"2c3c5f06\"><span style=\"color: #191F25;\">二、多种测试场景，录制脚本一次，还是需要录制多次脚本，还是可以改脚本参数？</span></h4><p><span style=\"color: #191F25;\"><br /></span></p><ul><li>录制过程 UIRecorder 会全局监听浏览器事件，操作过程捕捉对应的节点信息和操作事件，比如点击“跳转”按钮，该步骤录制对应的代码如下：</li></ul><p><br /></p><pre data-lang=\"javascript\"><code>it('click: 跳过 ( //a[text()=&quot;跳过&quot;], 38, 15, 0 )', async function(){\n  await driver.sleep(300).wait('//a[text()=&quot;跳转&quot;]', 1000)\n  .sleep(300).mouseMove(38, 15).click(0).catch(catchError);\n});</code></pre><ul><li>其中，<code>//a[text()=&quot;跳转&quot;]</code> 对应节点的 DOM 路径，<code>.mouseMove(38, 15).click(0)</code> 代表鼠标的相对位移和鼠标左键点击操作，而这些信息在录制过程已经“固定”了。</li><li>如果有多种测试场景属于一类测试场景（比如两个场景只有某个操作步骤某个参数不同，则可以通过手动更改录制脚本代码的形式，减少录制工作量），比如查询列表页面的前三页，可以做如下代码改造：</li></ul><p><br /></p><pre data-lang=\"javascript\"><code>const pages = [1, 2, 3];\n\npages.map( currentPage =&gt; {\n\tit('查询指定列表页', async function(){\n    await driver.url(_(`http://test.com/list.html?currentPage=${currentPage}`));\n  });\n})\n</code></pre><p><br /></p><h4 id=\"f2d28c7b\">三、页面打开失败，跳转至 <code>data:,</code></h4><p><br /></p><ul><li>检查本地 hosts 文件配置，确保 <code>127.0.0.1 localhost</code> 存在：</li></ul><ul data-lake-indent=\"1\"><li>Windows系统路径：<code>C:\\Windows\\System32\\drivers\\etc</code></li><li><span style=\"color: #383A42; background-color: #FAFAFA;\">Mac 系统路径：</span><code>/etc/hosts</code></li></ul><p><br /></p><h4 id=\"d1Dog\">四、录制过程手动点击浏览器窗口最大化，导致回归测试失败</h4><ul><li>录制的时候，终端交互会提示输入分辨率，然后录制过程需要固定窗口录制。录制过程中，手动点击窗口最大化，是没法监听到的，会导致回归测试失败。</li></ul><p><br /></p>","body_lake":"<!doctype lake><h4 id=\"be02a4b1\"><span style=\"color: #191F25;\">一、录制脚本时提示“excute error”原因及解决方法？</span></h4><p><span style=\"color: #191F25;\"><br /></span></p><ul><li><span style=\"color: #191F25;\">录制过程默认会开启同步校验浏览器，录制同时会进行回归校验，如果提示“执行失败”，则说明该步骤在回归测试过程有很大几率会执行失败，例如：</span></li></ul><ul data-lake-indent=\"1\"><li><span style=\"color: #191F25;\">提示 </span><code><span style=\"color: #191F25;\">Wait element diaplayed timeout</span></code>，则该步骤回归测试运行时也可能出现加载延迟，导致原因可能是页面较大或 iframe 内节点加载时间较长 或 异步请求数据时间较长，解决方法可以在该步骤前增加延迟时间。</li></ul><p><br /></p><h4 id=\"2c3c5f06\"><span style=\"color: #191F25;\">二、多种测试场景，录制脚本一次，还是需要录制多次脚本，还是可以改脚本参数？</span></h4><p><span style=\"color: #191F25;\"><br /></span></p><ul><li>录制过程 UIRecorder 会全局监听浏览器事件，操作过程捕捉对应的节点信息和操作事件，比如点击“跳转”按钮，该步骤录制对应的代码如下：</li></ul><p><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22it('click%3A%20%E8%B7%B3%E8%BF%87%20(%20%2F%2Fa%5Btext()%3D%5C%22%E8%B7%B3%E8%BF%87%5C%22%5D%2C%2038%2C%2015%2C%200%20)'%2C%20async%20function()%7B%5Cn%20%20await%20driver.sleep(300).wait('%2F%2Fa%5Btext()%3D%5C%22%E8%B7%B3%E8%BD%AC%5C%22%5D'%2C%201000)%5Cn%20%20.sleep(300).mouseMove(38%2C%2015).click(0).catch(catchError)%3B%5Cn%7D)%3B%22%2C%22id%22%3A%229VWzQ%22%7D\"></card><ul><li>其中，<code>//a[text()=&quot;跳转&quot;]</code> 对应节点的 DOM 路径，<code>.mouseMove(38, 15).click(0)</code> 代表鼠标的相对位移和鼠标左键点击操作，而这些信息在录制过程已经“固定”了。</li><li>如果有多种测试场景属于一类测试场景（比如两个场景只有某个操作步骤某个参数不同，则可以通过手动更改录制脚本代码的形式，减少录制工作量），比如查询列表页面的前三页，可以做如下代码改造：</li></ul><p><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20pages%20%3D%20%5B1%2C%202%2C%203%5D%3B%5Cn%5Cnpages.map(%20currentPage%20%3D%3E%20%7B%5Cn%5Ctit('%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E5%88%97%E8%A1%A8%E9%A1%B5'%2C%20async%20function()%7B%5Cn%20%20%20%20await%20driver.url(_(%60http%3A%2F%2Ftest.com%2Flist.html%3FcurrentPage%3D%24%7BcurrentPage%7D%60))%3B%5Cn%20%20%7D)%3B%5Cn%7D)%5Cn%22%2C%22id%22%3A%22yrYjX%22%7D\"></card><p><br /></p><h4 id=\"f2d28c7b\">三、页面打开失败，跳转至 <code>data:,</code></h4><p><br /></p><ul><li>检查本地 hosts 文件配置，确保 <code>127.0.0.1 localhost</code> 存在：</li></ul><ul data-lake-indent=\"1\"><li>Windows系统路径：<code>C:\\Windows\\System32\\drivers\\etc</code></li><li><span style=\"color: #383A42; background-color: #FAFAFA;\">Mac 系统路径：</span><code>/etc/hosts</code></li></ul><p><br /></p><h4 id=\"d1Dog\">四、录制过程手动点击浏览器窗口最大化，导致回归测试失败</h4><ul><li>录制的时候，终端交互会提示输入分辨率，然后录制过程需要固定窗口录制。录制过程中，手动点击窗口最大化，是没法监听到的，会导致回归测试失败。<cursor /></li></ul><p><br /></p>","public":1,"status":null,"likes_count":5,"comments_count":0,"content_updated_at":"2019-05-07T07:50:18.000Z","deleted_at":null,"created_at":"2019-04-08T06:32:39.000Z","updated_at":"2019-05-27T11:01:01.000Z","published_at":"2019-05-07T07:50:18.000Z","first_published_at":"2019-04-08T06:33:23.000Z","word_count":578,"cover":null,"description":"一、录制脚本时提示“excute error”原因及解决方法？录制过程默认会开启同步校验浏览器，录制同时会进行回归校验，如果提示“执行失败”，则说明该步骤在回归测试过程有很大几率会执行失败，例如：提示 Wait element diaplayed timeout，则该步骤回归测试运行时也可能出...","custom_description":null,"_serializer":"v2.doc_detail"}